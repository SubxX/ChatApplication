<div class="container-fluid">
  <div class="title text-center mb-2 mt-1">
    <img src="../../../../assets/Logo.png" class="logo">
    <span class="text-secondary title-text">PROFILE</span>
    <button class="back-btn-frpr" mat-icon-button [routerLink]="['/chatapplication/welcome']">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>
</div>
<div class="container-fluid over-flow">

  <div class="container text-center profile-pic mt-1">
    <img *ngIf="profilepic" [src]="profilepic" class="profile-pic-box">
    <img *ngIf="!profilepic" src="../../../../assets/user.svg" class="profile-pic-box">
    <input type="file" hidden #file (change)="changeProfilepic($event)">
    <button mat-icon-button class="btn-select" (click)="file.click()">
      <mat-icon>create</mat-icon>
    </button>
  </div>

  <div class="row mt-1 margin-btm">
    <div class="col-md-6">
      <p class="text-center font-weight-light font-size">EDIT PROFILE</p>
      <form [formGroup]="profilEditForm">
        <mat-form-field class="width-100">
          <input matInput type="text" placeholder="Name" formControlName="name">
        </mat-form-field>
        <mat-form-field class="width-100">
          <input matInput type="text" placeholder="Nickname" formControlName="nickname">
        </mat-form-field>
        <mat-form-field class="width-100">
          <input matInput type="text" placeholder="Email" formControlName="email">
        </mat-form-field>
        <mat-form-field class="width-100">
          <input matInput type="password" placeholder="Old Password" formControlName="password">
        </mat-form-field>
        <mat-form-field class="width-100">
          <input matInput [type]="isVisible ? 'text' : 'password'" placeholder="New Password"
            formControlName="newpassword">
          <button mat-icon-button matSuffix (click)="toogleVisibility()">
            <mat-icon>{{isVisible? 'visibility': 'visibility_off'}}</mat-icon>
          </button>
        </mat-form-field>
      </form>
      <button class="btn btn-light btn-block mt-3" (click)="saveChanges()">Save Changes</button>
    </div>

    <div class="col-md-6">
      <div class="box">
        <p class="text-center font-weight-light font-size mb-5">PROFILE INFO</p>
        <p class="font-weight-400 text-muted">Name</p>
        <p>{{currentUser.name}}</p>
        <p class="font-weight-400 text-muted">NickName</p>
        <p>{{currentUser.nickname}}</p>
        <p class="font-weight-400 text-muted">Email</p>
        <div class="flex">
          <p>{{currentUser.email}}</p>
          <i class="material-icons ml-2 verefied text-success">check_circle</i>
        </div>
      </div>
    </div>
  </div>

  <hr>

  <div class="container-fluid mt-4 mb-3">
    <p class="text-center font-weight-light font-size">PROFILE CONFIG & SECURITY</p>

    <mat-card class="mb-2 bg-light d-flex justify-content-between align-items-center">
      <p class="text-left">Turn on Email Security</p>
      <mat-slide-toggle color="primary"></mat-slide-toggle>
    </mat-card>

    <mat-card class="mb-2 bg-light d-flex justify-content-between align-items-center">
      <p class="text-left">Show NickName on top Left bar</p>
      <mat-slide-toggle color="primary" checked="nicknametop" (click)="nicknametop = !nicknametop"
        (click)="updateConfig()"></mat-slide-toggle>
    </mat-card>

    <mat-card class="mb-2 bg-light d-flex justify-content-between align-items-center">
      <p class="text-left">Enable Searchbar</p>
      <mat-slide-toggle color="primary" checked="searchbar" (click)="searchbar = ! searchbar" (click)="updateConfig()">
      </mat-slide-toggle>
    </mat-card>

    <mat-card class="mb-2 bg-light d-flex justify-content-between align-items-center">
      <p class="text-left">Get latest emails</p>
      <mat-slide-toggle color="primary" checked="latestupdates" (click)="latestupdates = ! latestupdates"
        (click)="updateConfig()"></mat-slide-toggle>
    </mat-card>

  </div>
</div>
